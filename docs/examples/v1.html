<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style.css">
    <title>Protocol Version 1</title>
</head>

<body>
    <div id="nav">
        <span><a href="negotiation.html">&lt (Negotiation) Previous</a></span>
        <span class="growx"></span>
        <span><a href="v2.html">Next (Examples v2) &gt</a></span>
    </div>
    <div class="page">
        <h1>Protocol Version 1</h1>

        <h2 id="get_text-success">Get Text</h2>
        <p>Note that all the bytes in the "Client sends" and "Server Sends" columns are hex-encoded.</p>
        <table>
            <caption>Example of Get Text method in protocol version 1</caption>
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Size (bytes)</th>
                    <th>Client sends</th>
                    <th>Server sends</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody class="left-align">
                <tr>
                    <td class="center" rowspan="2">Version Negotiation</td>
                    <td class="center">1</td>
                    <td class="mono">01</td>
                    <td></td>
                    <td>Client requests protocol version 1</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request to use protocol version 1</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Method selection</td>
                    <td class="center">1</td>
                    <td class="mono">01</td>
                    <td></td>
                    <td>Client requests the get text method</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Get text</td>
                    <td class="center">8</td>
                    <td></td>
                    <td class="mono">00 00 00 00 00 00 00 10</td>
                    <td>Server sends the length of copied text as 16 bytes as a 64-bit signed integer in big-endian
                        format. 0000000000000010 in hexadecimal is 16 in decimal.</td>
                </tr>
                <tr>
                    <td class="center">16</td>
                    <td></td>
                    <td class="mono">48 65 6C 6C 6F 20 43 6C 69 70 53 68 61 72 65 21</td>
                    <td>Server sends the text copied to the clipboard, which is 16 bytes long when encoded in UTF-8. The
                        text is "Hello ClipShare!" (without quotes) when decoded.</td>
                </tr>
                <tr>
                    <td class="center" colspan="5">Communication ends and connection closes</td>
                </tr>
            </tbody>
        </table>

        <h2 id="get_text-no_data">Get Text (no data)</h2>
        <p>Note that all the bytes in the "Client sends" and "Server Sends" columns are hex-encoded.</p>
        <table>
            <caption>Example of Get Text method with no data in protocol version 1</caption>
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Size (bytes)</th>
                    <th>Client sends</th>
                    <th>Server sends</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody class="left-align">
                <tr>
                    <td class="center" rowspan="2">Version Negotiation</td>
                    <td class="center">1</td>
                    <td class="mono">01</td>
                    <td></td>
                    <td>Client requests protocol version 1</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request to use protocol version 1</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Method selection</td>
                    <td class="center">1</td>
                    <td class="mono">01</td>
                    <td></td>
                    <td>Client requests the get text method</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">02</td>
                    <td>Server indicates that there is no text copied to the clipboard (No data)</td>
                </tr>
                <tr>
                    <td class="center" colspan="5">Communication ends and connection closes</td>
                </tr>
            </tbody>
        </table>

        <h2 id="send_text">Send Text</h2>
        <p>Note that all the bytes in the "Client sends" and "Server Sends" columns are hex-encoded.</p>
        <table>
            <caption>Example of Send Text method in protocol version 1</caption>
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Size (bytes)</th>
                    <th>Client sends</th>
                    <th>Server sends</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody class="left-align">
                <tr>
                    <td class="center" rowspan="2">Version Negotiation</td>
                    <td class="center">1</td>
                    <td class="mono">01</td>
                    <td></td>
                    <td>Client requests protocol version 1</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request to use protocol version 1</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Method selection</td>
                    <td class="center">1</td>
                    <td class="mono">02</td>
                    <td></td>
                    <td>Client requests the send text method</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Send text</td>
                    <td class="center">8</td>
                    <td class="mono">00 00 00 00 00 00 00 10</td>
                    <td></td>
                    <td>Client sends the length of copied text as 16 bytes as a 64-bit signed integer in big-endian
                        format. 0000000000000010 in hexadecimal is 16 in decimal.</td>
                </tr>
                <tr>
                    <td class="center">16</td>
                    <td class="mono">48 65 6C 6C 6F 20 43 6C 69 70 53 68 61 72 65 21</td>
                    <td></td>
                    <td>Client sends the text copied to the clipboard, which is 16 bytes long when encoded in UTF-8. The
                        text is "Hello ClipShare!" (without quotes) when decoded.</td>
                </tr>
                <tr>
                    <td class="center" colspan="5">Communication ends and connection closes</td>
                </tr>
            </tbody>
        </table>

        <h2 id="get_files-success">Get Files</h2>
        <p>Note that all the bytes in the "Client sends" and "Server Sends" columns are hex-encoded.</p>
        <table>
            <caption>Example of Get Files method in protocol version 1</caption>
            <thead>
                <tr>
                    <th colspan="2">Phase</th>
                    <th>Size (bytes)</th>
                    <th>Client sends</th>
                    <th>Server sends</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody class="left-align">
                <tr>
                    <td class="center" rowspan="2" colspan="2">Version Negotiation</td>
                    <td class="center">1</td>
                    <td class="mono">01</td>
                    <td></td>
                    <td>Client requests protocol version 1</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request to use protocol version 1</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2" colspan="2">Method selection</td>
                    <td class="center">1</td>
                    <td class="mono">03</td>
                    <td></td>
                    <td>Client requests the get files method</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request</td>
                </tr>
                <tr>
                    <td class="center" rowspan="9">Get files</td>
                    <td class="center">File count</td>
                    <td class="center">8</td>
                    <td></td>
                    <td class="mono">00 00 00 00 00 00 00 02</td>
                    <td>Server sends the number of files as 2 in a 64-bit signed integer in big-endian
                        format.</td>
                </tr>
                <tr>
                    <td class="center" rowspan="4">First file</td>
                    <td class="center">8</td>
                    <td></td>
                    <td class="mono">00 00 00 00 00 00 00 0E</td>
                    <td>Server sends the length of the first file name as 14 bytes as a 64-bit signed integer in
                        big-endian format. 000000000000000E in hexadecimal is 14 in decimal.</td>
                </tr>
                <tr>
                    <td class="center">14</td>
                    <td></td>
                    <td class="mono">66 69 72 73 74 5F 66 69 6C 65 2E 74 78 74</td>
                    <td>Server sends the name of the first copied file, which is 14 bytes long when encoded in UTF-8.
                        The file name is "first_file.txt" (without quotes) when decoded.</td>
                </tr>
                <tr>
                    <td class="center">8</td>
                    <td></td>
                    <td class="mono">00 00 00 00 00 00 00 25</td>
                    <td>Server sends the size of the first file as 37 bytes as a 64-bit signed integer in big-endian
                        format. 0000000000000025 in hexadecimal is 37 in decimal.</td>
                </tr>
                <tr>
                    <td class="center">37</td>
                    <td></td>
                    <td class="mono">74 68 69 73 20 69 73 20 74 68 65 20 63 6F 6E 74 65 6E 74 20 6F 66 20 74 68 65 20 66
                        69 72 73 74 20 66 69 6C 65</td>
                    <td>Server sends the content of the first copied file, which is 37 bytes in size. The file content
                        is "this is the content of the first file" (without quotes).</td>
                </tr>
                <tr>
                    <td class="center" rowspan="4">Second file</td>
                    <td class="center">8</td>
                    <td></td>
                    <td class="mono">00 00 00 00 00 00 00 0F</td>
                    <td>Server sends the length of the second file name as 15 bytes as a 64-bit signed integer in
                        big-endian format. 000000000000000F in hexadecimal is 15 in decimal.</td>
                </tr>
                <tr>
                    <td class="center">15</td>
                    <td></td>
                    <td class="mono">73 65 63 6F 6E 64 5F 66 69 6C 65 2E 74 78 74</td>
                    <td>Server sends the name of the second copied file, which is 15 bytes long when encoded in UTF-8.
                        The file name is "second_file.txt" (without quotes) when decoded.</td>
                </tr>
                <tr>
                    <td class="center">8</td>
                    <td></td>
                    <td class="mono">00 00 00 00 00 00 00 26</td>
                    <td>Server sends the size of the second file as 38 bytes as a 64-bit signed integer in big-endian
                        format. 0000000000000026 in hexadecimal is 38 in decimal.</td>
                </tr>
                <tr>
                    <td class="center">38</td>
                    <td></td>
                    <td class="mono">74 68 69 73 20 69 73 20 74 68 65 20 63 6F 6E 74 65 6E 74 20 6F 66 20 74 68 65 20 73
                        65 63 6F 6E 64 20 66 69 6C 65</td>
                    <td>Server sends the content of the second copied file, which is 38 bytes in size. The file content
                        is "this is the content of the second file" (without quotes).</td>
                </tr>
                <tr>
                    <td class="center" colspan="6">Communication ends and connection closes</td>
                </tr>
            </tbody>
        </table>

        <h2 id="get_files-no_data">Get Files (no data)</h2>
        <p>Note that all the bytes in the "Client sends" and "Server Sends" columns are hex-encoded.</p>
        <table>
            <caption>Example of Get Files method with no data in protocol version 1</caption>
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Size (bytes)</th>
                    <th>Client sends</th>
                    <th>Server sends</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody class="left-align">
                <tr>
                    <td class="center" rowspan="2">Version Negotiation</td>
                    <td class="center">1</td>
                    <td class="mono">01</td>
                    <td></td>
                    <td>Client requests protocol version 1</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request to use protocol version 1</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Method selection</td>
                    <td class="center">1</td>
                    <td class="mono">03</td>
                    <td></td>
                    <td>Client requests the get files method</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">02</td>
                    <td>Server indicates that there are no files copied (No data)</td>
                </tr>
                <tr>
                    <td class="center" colspan="5">Communication ends and connection closes</td>
                </tr>
            </tbody>
        </table>

        <h2 id="send_file">Send File</h2>
        <p>Note that all the bytes in the "Client sends" and "Server Sends" columns are hex-encoded.</p>
        <table>
            <caption>Example of Send File method in protocol version 1</caption>
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Size (bytes)</th>
                    <th>Client sends</th>
                    <th>Server sends</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody class="left-align">
                <tr>
                    <td class="center" rowspan="2">Version Negotiation</td>
                    <td class="center">1</td>
                    <td class="mono">01</td>
                    <td></td>
                    <td>Client requests protocol version 1</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request to use protocol version 1</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Method selection</td>
                    <td class="center">1</td>
                    <td class="mono">04</td>
                    <td></td>
                    <td>Client requests the send file method</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request</td>
                </tr>
                <tr>
                    <td class="center" rowspan="4">Send file</td>
                    <td class="center">8</td>
                    <td class="mono">00 00 00 00 00 00 00 08</td>
                    <td></td>
                    <td>Client sends the length of the file name as 8 bytes as a 64-bit signed integer in big-endian
                        format. 0000000000000008 in hexadecimal is 8 in decimal.</td>
                </tr>
                <tr>
                    <td class="center">8</td>
                    <td class="mono">66 69 6C 65 2E 74 78 74</td>
                    <td></td>
                    <td>Client sends the file name, which is 8 bytes long when encoded in UTF-8. The file name is
                        "file.txt" (without quotes) when decoded.</td>
                </tr>
                <tr>
                    <td class="center">8</td>
                    <td class="mono">00 00 00 00 00 00 00 1F</td>
                    <td></td>
                    <td>Client sends the size of the file as 31 bytes as a 64-bit signed integer in big-endian format.
                        000000000000001F in hexadecimal is 31 in decimal.</td>
                </tr>
                <tr>
                    <td class="center">31</td>
                    <td class="mono">54 68 69 73 20 69 73 20 74 68 65 20 63 6F 6E 74 65 6E 74 20 6F 66 20 74 68 65 20 66
                        69 6C 65</td>
                    <td></td>
                    <td>Client sends the content of the file, which is 31 bytes in size. The file content is "This is
                        the content of the file" (without quotes).</td>
                </tr>
                <tr>
                    <td class="center" colspan="5">Communication ends and connection closes</td>
                </tr>
            </tbody>
        </table>

        <h2 id="get_image">Get Image</h2>
        <p>Note that all the bytes in the "Client sends" and "Server Sends" columns are hex-encoded.</p>
        <table>
            <caption>Example of Get Image method in protocol version 1</caption>
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Size (bytes)</th>
                    <th>Client sends</th>
                    <th>Server sends</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody class="left-align">
                <tr>
                    <td class="center" rowspan="2">Version Negotiation</td>
                    <td class="center">1</td>
                    <td class="mono">01</td>
                    <td></td>
                    <td>Client requests protocol version 1</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request to use protocol version 1</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Method selection</td>
                    <td class="center">1</td>
                    <td class="mono">05</td>
                    <td></td>
                    <td>Client requests the get image method</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Get Image</td>
                    <td class="center">8</td>
                    <td></td>
                    <td class="mono">00 00 00 00 00 00 00 5F</td>
                    <td>Server sends the length of the image copied to the clipboard (or a screenshot) as 95 bytes as a
                        64-bit signed integer in big-endian format. 000000000000005F in hexadecimal is 95 in decimal.
                    </td>
                </tr>
                <tr>
                    <td class="center">95</td>
                    <td></td>
                    <td class="mono">89 50 4E 47 0D 0A 1A 0A 00 00 00 0D 49 48 44 52 00 00 00 05 00 00 00 05 08 02 00 00
                        00 02 0D B1 B2 00 00 00 26 49 44 41 54 08 D7 55 CB 21 12 00 20 10 80 40 70 FC FF 97 31 68 F0 68
                        1B B0 42 B9 95 01 F5 AC 8B BF 9A D6 CD FC 0F 82 8C 0E 05 22 B1 80 9C 00 00 00 00 49 45 4E 44 AE
                        42 60 82</td>
                    <td>Server sends the image copied to the clipboard (or a screenshot), which is 95 bytes long.<br>
                        <div class="image"><span>The image is: </span><img alt="shared item"
                                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAJklEQVQI11XLIRIAIBCAQHD8/5cxaPBoG7BCuZUB9ayLv5rWzfwPgowOBSKxgJwAAAAASUVORK5CYII=">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="center" colspan="5">Communication ends and connection closes</td>
                </tr>
            </tbody>
        </table>

        <h2 id="info">Info</h2>
        <p>Note that all the bytes in the "Client sends" and "Server Sends" columns are hex-encoded.</p>
        <table>
            <caption>Example of Info method in protocol version 1</caption>
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Size (bytes)</th>
                    <th>Client sends</th>
                    <th>Server sends</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody class="left-align">
                <tr>
                    <td class="center" rowspan="2">Version Negotiation</td>
                    <td class="center">1</td>
                    <td class="mono">01</td>
                    <td></td>
                    <td>Client requests protocol version 1</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request to use protocol version 1</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Method selection</td>
                    <td class="center">1</td>
                    <td class="mono">7D</td>
                    <td></td>
                    <td>Client requests the info method</td>
                </tr>
                <tr>
                    <td class="center">1</td>
                    <td></td>
                    <td class="mono">01</td>
                    <td>Server accepts the request</td>
                </tr>
                <tr>
                    <td class="center" rowspan="2">Get text</td>
                    <td class="center">8</td>
                    <td></td>
                    <td class="mono">00 00 00 00 00 00 00 0A</td>
                    <td>Server sends the length of info as 10 bytes as a 64-bit signed integer in big-endian format.
                        000000000000001A in hexadecimal is 10 in decimal.</td>
                </tr>
                <tr>
                    <td class="center">10</td>
                    <td></td>
                    <td class="mono">63 6C 69 70 5F 73 68 61 72 65</td>
                    <td>Server sends the info text, which is 10 bytes long when encoded in UTF-8. The info text is
                        "clip_share" (without quotes) when decoded.</td>
                </tr>
                <tr>
                    <td class="center" colspan="5">Communication ends and connection closes</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="fill-page"></div>
    <div id="foot">
        <span><a href="negotiation.html">&lt (Negotiation) Previous</a></span>
        <span class="growx"></span>
        <span><a href="v2.html">Next (Examples v2) &gt</a></span>
    </div>
</body>

</html>